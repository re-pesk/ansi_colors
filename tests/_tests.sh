DIR_TESTS="$(cd "$(dirname "${0}")" && pwd)"
DIR_SRC="$(cd "$(dirname "${0}")/.." && pwd)"

. "${DIR_TESTS}/_test_helpers.sh"
# shellcheck source=ansi_esc_codes.sh
. "$DIR_SRC/ansi_esc_codes.sh"

shell_name="$(ansi_getShellName)"
[ "$(ansi_getShellName)" = "zsh" ] && setopt sh_word_split

show_actual=1
test_group_list="test_runColorTests test_runExtColorTests"

test_runColorTests() {
  # E_RESET='00-00'
  # E_BOLD='01-22'
  # E_FAINT='02-22'
  # E_ITALIC='03-23'
  # E_UNDERLINE='04-24'
  # E_UNDERLINE_DOUBLE='21-24'
  # E_OVERLINE='53-55'
  # E_BLINK='05-25'
  # E_INVERT='07-27'
  # E_HIDE='08-28'
  # E_STRIKE='09-29'

  test_title "Color Tests${NL}"

  expected="$(
    cat <<EOF
^[[00m^[[30m0^[[31m1^[[32m2^[[33m3^[[34m4^[[35m5^[[36m6^[[37m7^[[39m^[[00m$
^[[00m^[[30m0^[[31m1^[[32m2^[[33m3^[[34m4^[[35m5^[[36m6^[[37m7^[[39m^[[00m$
EOF
  )"
  # test_printColors "$E_RESET" $(seq 30 37) | cat -vte >&2
  test_colors "Reset" "$E_RESET" 30 37 "$expected"

  expected="$(
    cat <<EOF
^[[00m^[[40m0^[[41m1^[[42m2^[[43m3^[[44m4^[[45m5^[[46m6^[[47m7^[[49m^[[00m$
^[[00m^[[40m0^[[41m1^[[42m2^[[43m3^[[44m4^[[45m5^[[46m6^[[47m7^[[49m^[[00m$
EOF
  )"
  # test_printColors "$E_RESET" $(seq 40 47) | cat -vte >&2
  test_colors "Reset (background)" "$E_RESET" 40 47 "$expected"

  expected="$(
    cat <<EOF
^[[01m^[[30m0^[[31m1^[[32m2^[[33m3^[[34m4^[[35m5^[[36m6^[[37m7^[[39m^[[22m$
^[[22m^[[30m0^[[31m1^[[32m2^[[33m3^[[34m4^[[35m5^[[36m6^[[37m7^[[39m^[[22m$
EOF
  )"
  # test_printColors "$E_BOLD" $(seq 30 37) | cat -vte >&2
  test_colors "Bold" "$E_BOLD" 30 37 "$expected"

  expected="$(
    cat <<EOF
^[[01m^[[40m0^[[41m1^[[42m2^[[43m3^[[44m4^[[45m5^[[46m6^[[47m7^[[49m^[[22m$
^[[22m^[[40m0^[[41m1^[[42m2^[[43m3^[[44m4^[[45m5^[[46m6^[[47m7^[[49m^[[22m$
EOF
  )"
  # test_printColors "$E_BOLD" $(seq 40 47) | cat -vte >&2
  test_colors "Bold (background)" "$E_BOLD" 40 47 "$expected"

  expected="$(
    cat <<EOF
^[[02m^[[30m0^[[31m1^[[32m2^[[33m3^[[34m4^[[35m5^[[36m6^[[37m7^[[39m^[[22m$
^[[22m^[[30m0^[[31m1^[[32m2^[[33m3^[[34m4^[[35m5^[[36m6^[[37m7^[[39m^[[22m$
EOF
  )"
  # test_printColors "$E_FAINT" 30 $(seq 30 37) | cat -vte >&2
  test_colors "Faint" "$E_FAINT" 30 37 "$expected"

  expected="$(
    cat <<EOF
^[[02m^[[40m0^[[41m1^[[42m2^[[43m3^[[44m4^[[45m5^[[46m6^[[47m7^[[49m^[[22m$
^[[22m^[[40m0^[[41m1^[[42m2^[[43m3^[[44m4^[[45m5^[[46m6^[[47m7^[[49m^[[22m$
EOF
  )"
  # test_printColors "$E_FAINT" 40 $(seq 40 47) | cat -vte >&2
  test_colors "Faint (background)" "$E_FAINT" 40 47 "$expected"

  expected="$(
    cat <<EOF
^[[03m^[[30m0^[[31m1^[[32m2^[[33m3^[[34m4^[[35m5^[[36m6^[[37m7^[[39m^[[23m$
^[[23m^[[30m0^[[31m1^[[32m2^[[33m3^[[34m4^[[35m5^[[36m6^[[37m7^[[39m^[[23m$
EOF
  )"
  # test_printColors "$E_ITALIC" 30 $(seq 30 37) | cat -vte >&2
  test_colors "Italic" "$E_ITALIC" 30 37 "$expected"

  expected="$(
    cat <<EOF
^[[03m^[[40m0^[[41m1^[[42m2^[[43m3^[[44m4^[[45m5^[[46m6^[[47m7^[[49m^[[23m$
^[[23m^[[40m0^[[41m1^[[42m2^[[43m3^[[44m4^[[45m5^[[46m6^[[47m7^[[49m^[[23m$
EOF
  )"
  # test_printColors "$E_ITALIC" 40 $(seq 40 47) | cat -vte >&2
  test_colors "Italic (background)" "$E_ITALIC" 40 47 "$expected"

  expected="$(
    cat <<EOF
^[[04m^[[30m0^[[31m1^[[32m2^[[33m3^[[34m4^[[35m5^[[36m6^[[37m7^[[39m^[[24m$
^[[24m^[[30m0^[[31m1^[[32m2^[[33m3^[[34m4^[[35m5^[[36m6^[[37m7^[[39m^[[24m$
EOF
  )"
  # test_printColors "$E_UNDERLINE" 30 $(seq 30 37) | cat -vte >&2
  test_colors "Underline" "$E_UNDERLINE" 30 37 "$expected"

  expected="$(
    cat <<EOF
^[[04m^[[40m0^[[41m1^[[42m2^[[43m3^[[44m4^[[45m5^[[46m6^[[47m7^[[49m^[[24m$
^[[24m^[[40m0^[[41m1^[[42m2^[[43m3^[[44m4^[[45m5^[[46m6^[[47m7^[[49m^[[24m$
EOF
  )"
  # test_printColors "$E_UNDERLINE" 40 $(seq 40 47) | cat -vte >&2
  test_colors "Underline (background)" "$E_UNDERLINE" 40 47 "$expected"

  expected="$(
    cat <<EOF
^[[21m^[[30m0^[[31m1^[[32m2^[[33m3^[[34m4^[[35m5^[[36m6^[[37m7^[[39m^[[24m$
^[[24m^[[30m0^[[31m1^[[32m2^[[33m3^[[34m4^[[35m5^[[36m6^[[37m7^[[39m^[[24m$
EOF
  )"
  # test_printColors "$E_UNDERLINE" 30 $(seq 30 37) | cat -vte >&2
  test_colors "Underline" "$E_UNDERLINE_DOUBLE" 30 37 "$expected"

  expected="$(
    cat <<EOF
^[[21m^[[40m0^[[41m1^[[42m2^[[43m3^[[44m4^[[45m5^[[46m6^[[47m7^[[49m^[[24m$
^[[24m^[[40m0^[[41m1^[[42m2^[[43m3^[[44m4^[[45m5^[[46m6^[[47m7^[[49m^[[24m$
EOF
  )"
  # test_printColors "$E_UNDERLINE" 40 $(seq 40 47) | cat -vte >&2
  test_colors "Underline (background)" "$E_UNDERLINE_DOUBLE" 40 47 "$expected"

  expected="$(
    cat <<EOF
^[[53m^[[30m0^[[31m1^[[32m2^[[33m3^[[34m4^[[35m5^[[36m6^[[37m7^[[39m^[[55m$
^[[55m^[[30m0^[[31m1^[[32m2^[[33m3^[[34m4^[[35m5^[[36m6^[[37m7^[[39m^[[55m$
EOF
  )"
  # test_printColors "$E_OVERLINE" 30 $(seq 30 37) | cat -vte >&2
  test_colors "Overline" "$E_OVERLINE" 30 37 "$expected"

  expected="$(
    cat <<EOF
^[[53m^[[40m0^[[41m1^[[42m2^[[43m3^[[44m4^[[45m5^[[46m6^[[47m7^[[49m^[[55m$
^[[55m^[[40m0^[[41m1^[[42m2^[[43m3^[[44m4^[[45m5^[[46m6^[[47m7^[[49m^[[55m$
EOF
  )"
  # test_printColors "$E_OVERLINE" 40 $(seq 40 47) | cat -vte >&2
  test_colors "Overline (background)" "$E_OVERLINE" 40 47 "$expected"

  expected="$(
    cat <<EOF
^[[05m^[[30m0^[[31m1^[[32m2^[[33m3^[[34m4^[[35m5^[[36m6^[[37m7^[[39m^[[25m$
^[[25m^[[30m0^[[31m1^[[32m2^[[33m3^[[34m4^[[35m5^[[36m6^[[37m7^[[39m^[[25m$
EOF
  )"
  # test_printColors "$E_BLINK" 30 $(seq 30 37) | cat -vte >&2
  test_colors "Blink" "$E_BLINK" 30 37 "$expected"

  expected="$(
    cat <<EOF
^[[05m^[[40m0^[[41m1^[[42m2^[[43m3^[[44m4^[[45m5^[[46m6^[[47m7^[[49m^[[25m$
^[[25m^[[40m0^[[41m1^[[42m2^[[43m3^[[44m4^[[45m5^[[46m6^[[47m7^[[49m^[[25m$
EOF
  )"
  # test_printColors "$E_BLINK" 40 $(seq 40 47) | cat -vte >&2
  test_colors "Blink (background)" "$E_BLINK" 40 47 "$expected"

  expected="$(
    cat <<EOF
^[[07m^[[30m0^[[31m1^[[32m2^[[33m3^[[34m4^[[35m5^[[36m6^[[37m7^[[39m^[[27m$
^[[27m^[[30m0^[[31m1^[[32m2^[[33m3^[[34m4^[[35m5^[[36m6^[[37m7^[[39m^[[27m$
EOF
  )"
  # test_printColors "$E_INVERT" 30 $(seq 30 37) | cat -vte >&2
  test_colors "Invert" "$E_INVERT" 30 37 "$expected"

  expected="$(
    cat <<EOF
^[[07m^[[40m0^[[41m1^[[42m2^[[43m3^[[44m4^[[45m5^[[46m6^[[47m7^[[49m^[[27m$
^[[27m^[[40m0^[[41m1^[[42m2^[[43m3^[[44m4^[[45m5^[[46m6^[[47m7^[[49m^[[27m$
EOF
  )"
  # test_printColors "$E_INVERT" 40 $(seq 40 47) | cat -vte >&2
  test_colors "Invert (background)" "$E_INVERT" 40 47 "$expected"

  expected="$(
    cat <<EOF
^[[09m^[[30m0^[[31m1^[[32m2^[[33m3^[[34m4^[[35m5^[[36m6^[[37m7^[[39m^[[29m$
^[[29m^[[30m0^[[31m1^[[32m2^[[33m3^[[34m4^[[35m5^[[36m6^[[37m7^[[39m^[[29m$
EOF
  )"
  # test_printColors "$E_STRIKE" 30 $(seq 30 37) | cat -vte >&2
  test_colors "Strike" "$E_STRIKE" 30 37 "$expected"

  expected="$(
    cat <<EOF
^[[09m^[[40m0^[[41m1^[[42m2^[[43m3^[[44m4^[[45m5^[[46m6^[[47m7^[[49m^[[29m$
^[[29m^[[40m0^[[41m1^[[42m2^[[43m3^[[44m4^[[45m5^[[46m6^[[47m7^[[49m^[[29m$
EOF
  )"
  # test_printColors "$E_STRIKE" 40 $(seq 40 47) | cat -vte >&2
  test_colors "Strike (background)" "$E_STRIKE" 40 47 "$expected"

  expected="$(
    cat <<EOF
^[[00m^[[90m0^[[91m1^[[92m2^[[93m3^[[94m4^[[95m5^[[96m6^[[97m7^[[39m^[[00m$
^[[00m^[[90m0^[[91m1^[[92m2^[[93m3^[[94m4^[[95m5^[[96m6^[[97m7^[[39m^[[00m$
EOF
  )"
  # test_printColors "$E_RESET" 90 $(seq 90 97) | cat -vte >&2
  test_colors "Bright Colors" "$E_RESET" 90 97 "$expected"

  expected="$(
    cat <<EOF
^[[00m^[[100m0^[[101m1^[[102m2^[[103m3^[[104m4^[[105m5^[[106m6^[[107m7^[[49m^[[00m$
^[[00m^[[100m0^[[101m1^[[102m2^[[103m3^[[104m4^[[105m5^[[106m6^[[107m7^[[49m^[[00m$
EOF
  )"
  # test_printColors "$E_RESET" 100 $(seq 100 107) | cat -vte >&2
  test_colors "Bright Colors (background)" "$E_RESET" 100 107 "$expected"
  printf ""
  return 0
}

test_runExtColorTests() {
  # E_RESET='00-00'
  # E_BOLD='01-22'
  # E_FAINT='02-22'
  # E_ITALIC='03-23'
  # E_UNDERLINE='04-24'
  # E_UNDERLINE_DOUBLE='21-24'
  # E_OVERLINE='53-55'
  # E_BLINK='05-25'
  # E_INVERT='07-27'
  # E_HIDE='08-28'
  # E_STRIKE='09-29'

  test_title "Extended Color Tests${NL}"

  expected="$(
    cat <<EOF
^[[38;5;0m000^[[39m^[[38;5;1m001^[[39m^[[38;5;2m002^[[39m^[[38;5;3m003^[[39m^[[38;5;4m004^[[39m^[[38;5;5m005^[[39m^[[38;5;6m006^[[39m^[[38;5;7m007^[[39m^[[38;5;8m008^[[39m^[[38;5;9m009^[[39m^[[38;5;10m010^[[39m^[[38;5;11m011^[[39m^[[38;5;12m012^[[39m^[[38;5;13m013^[[39m^[[38;5;14m014^[[39m^[[38;5;15m015^[[39m$
^[[38;5;16m016^[[39m^[[38;5;17m017^[[39m^[[38;5;18m018^[[39m^[[38;5;19m019^[[39m^[[38;5;20m020^[[39m^[[38;5;21m021^[[39m^[[38;5;22m022^[[39m^[[38;5;23m023^[[39m^[[38;5;24m024^[[39m^[[38;5;25m025^[[39m^[[38;5;26m026^[[39m^[[38;5;27m027^[[39m^[[38;5;28m028^[[39m^[[38;5;29m029^[[39m^[[38;5;30m030^[[39m^[[38;5;31m031^[[39m^[[38;5;32m032^[[39m^[[38;5;33m033^[[39m^[[38;5;34m034^[[39m^[[38;5;35m035^[[39m^[[38;5;36m036^[[39m^[[38;5;37m037^[[39m^[[38;5;38m038^[[39m^[[38;5;39m039^[[39m^[[38;5;40m040^[[39m^[[38;5;41m041^[[39m^[[38;5;42m042^[[39m^[[38;5;43m043^[[39m^[[38;5;44m044^[[39m^[[38;5;45m045^[[39m^[[38;5;46m046^[[39m^[[38;5;47m047^[[39m^[[38;5;48m048^[[39m^[[38;5;49m049^[[39m^[[38;5;50m050^[[39m^[[38;5;51m051^[[39m$
^[[38;5;52m052^[[39m^[[38;5;53m053^[[39m^[[38;5;54m054^[[39m^[[38;5;55m055^[[39m^[[38;5;56m056^[[39m^[[38;5;57m057^[[39m^[[38;5;58m058^[[39m^[[38;5;59m059^[[39m^[[38;5;60m060^[[39m^[[38;5;61m061^[[39m^[[38;5;62m062^[[39m^[[38;5;63m063^[[39m^[[38;5;64m064^[[39m^[[38;5;65m065^[[39m^[[38;5;66m066^[[39m^[[38;5;67m067^[[39m^[[38;5;68m068^[[39m^[[38;5;69m069^[[39m^[[38;5;70m070^[[39m^[[38;5;71m071^[[39m^[[38;5;72m072^[[39m^[[38;5;73m073^[[39m^[[38;5;74m074^[[39m^[[38;5;75m075^[[39m^[[38;5;76m076^[[39m^[[38;5;77m077^[[39m^[[38;5;78m078^[[39m^[[38;5;79m079^[[39m^[[38;5;80m080^[[39m^[[38;5;81m081^[[39m^[[38;5;82m082^[[39m^[[38;5;83m083^[[39m^[[38;5;84m084^[[39m^[[38;5;85m085^[[39m^[[38;5;86m086^[[39m^[[38;5;87m087^[[39m$
^[[38;5;88m088^[[39m^[[38;5;89m089^[[39m^[[38;5;90m090^[[39m^[[38;5;91m091^[[39m^[[38;5;92m092^[[39m^[[38;5;93m093^[[39m^[[38;5;94m094^[[39m^[[38;5;95m095^[[39m^[[38;5;96m096^[[39m^[[38;5;97m097^[[39m^[[38;5;98m098^[[39m^[[38;5;99m099^[[39m^[[38;5;100m100^[[39m^[[38;5;101m101^[[39m^[[38;5;102m102^[[39m^[[38;5;103m103^[[39m^[[38;5;104m104^[[39m^[[38;5;105m105^[[39m^[[38;5;106m106^[[39m^[[38;5;107m107^[[39m^[[38;5;108m108^[[39m^[[38;5;109m109^[[39m^[[38;5;110m110^[[39m^[[38;5;111m111^[[39m^[[38;5;112m112^[[39m^[[38;5;113m113^[[39m^[[38;5;114m114^[[39m^[[38;5;115m115^[[39m^[[38;5;116m116^[[39m^[[38;5;117m117^[[39m^[[38;5;118m118^[[39m^[[38;5;119m119^[[39m^[[38;5;120m120^[[39m^[[38;5;121m121^[[39m^[[38;5;122m122^[[39m^[[38;5;123m123^[[39m$
^[[38;5;124m124^[[39m^[[38;5;125m125^[[39m^[[38;5;126m126^[[39m^[[38;5;127m127^[[39m^[[38;5;128m128^[[39m^[[38;5;129m129^[[39m^[[38;5;130m130^[[39m^[[38;5;131m131^[[39m^[[38;5;132m132^[[39m^[[38;5;133m133^[[39m^[[38;5;134m134^[[39m^[[38;5;135m135^[[39m^[[38;5;136m136^[[39m^[[38;5;137m137^[[39m^[[38;5;138m138^[[39m^[[38;5;139m139^[[39m^[[38;5;140m140^[[39m^[[38;5;141m141^[[39m^[[38;5;142m142^[[39m^[[38;5;143m143^[[39m^[[38;5;144m144^[[39m^[[38;5;145m145^[[39m^[[38;5;146m146^[[39m^[[38;5;147m147^[[39m^[[38;5;148m148^[[39m^[[38;5;149m149^[[39m^[[38;5;150m150^[[39m^[[38;5;151m151^[[39m^[[38;5;152m152^[[39m^[[38;5;153m153^[[39m^[[38;5;154m154^[[39m^[[38;5;155m155^[[39m^[[38;5;156m156^[[39m^[[38;5;157m157^[[39m^[[38;5;158m158^[[39m^[[38;5;159m159^[[39m$
^[[38;5;160m160^[[39m^[[38;5;161m161^[[39m^[[38;5;162m162^[[39m^[[38;5;163m163^[[39m^[[38;5;164m164^[[39m^[[38;5;165m165^[[39m^[[38;5;166m166^[[39m^[[38;5;167m167^[[39m^[[38;5;168m168^[[39m^[[38;5;169m169^[[39m^[[38;5;170m170^[[39m^[[38;5;171m171^[[39m^[[38;5;172m172^[[39m^[[38;5;173m173^[[39m^[[38;5;174m174^[[39m^[[38;5;175m175^[[39m^[[38;5;176m176^[[39m^[[38;5;177m177^[[39m^[[38;5;178m178^[[39m^[[38;5;179m179^[[39m^[[38;5;180m180^[[39m^[[38;5;181m181^[[39m^[[38;5;182m182^[[39m^[[38;5;183m183^[[39m^[[38;5;184m184^[[39m^[[38;5;185m185^[[39m^[[38;5;186m186^[[39m^[[38;5;187m187^[[39m^[[38;5;188m188^[[39m^[[38;5;189m189^[[39m^[[38;5;190m190^[[39m^[[38;5;191m191^[[39m^[[38;5;192m192^[[39m^[[38;5;193m193^[[39m^[[38;5;194m194^[[39m^[[38;5;195m195^[[39m$
^[[38;5;196m196^[[39m^[[38;5;197m197^[[39m^[[38;5;198m198^[[39m^[[38;5;199m199^[[39m^[[38;5;200m200^[[39m^[[38;5;201m201^[[39m^[[38;5;202m202^[[39m^[[38;5;203m203^[[39m^[[38;5;204m204^[[39m^[[38;5;205m205^[[39m^[[38;5;206m206^[[39m^[[38;5;207m207^[[39m^[[38;5;208m208^[[39m^[[38;5;209m209^[[39m^[[38;5;210m210^[[39m^[[38;5;211m211^[[39m^[[38;5;212m212^[[39m^[[38;5;213m213^[[39m^[[38;5;214m214^[[39m^[[38;5;215m215^[[39m^[[38;5;216m216^[[39m^[[38;5;217m217^[[39m^[[38;5;218m218^[[39m^[[38;5;219m219^[[39m^[[38;5;220m220^[[39m^[[38;5;221m221^[[39m^[[38;5;222m222^[[39m^[[38;5;223m223^[[39m^[[38;5;224m224^[[39m^[[38;5;225m225^[[39m^[[38;5;226m226^[[39m^[[38;5;227m227^[[39m^[[38;5;228m228^[[39m^[[38;5;229m229^[[39m^[[38;5;230m230^[[39m^[[38;5;231m231^[[39m$
^[[38;5;232m232^[[39m^[[38;5;233m233^[[39m^[[38;5;234m234^[[39m^[[38;5;235m235^[[39m^[[38;5;236m236^[[39m^[[38;5;237m237^[[39m^[[38;5;238m238^[[39m^[[38;5;239m239^[[39m^[[38;5;240m240^[[39m^[[38;5;241m241^[[39m^[[38;5;242m242^[[39m^[[38;5;243m243^[[39m^[[38;5;244m244^[[39m^[[38;5;245m245^[[39m^[[38;5;246m246^[[39m^[[38;5;247m247^[[39m^[[38;5;248m248^[[39m^[[38;5;249m249^[[39m^[[38;5;250m250^[[39m^[[38;5;251m251^[[39m^[[38;5;252m252^[[39m^[[38;5;253m253^[[39m^[[38;5;254m254^[[39m^[[38;5;255m255^[[39m$
EOF
  )"

  # test_printExtColors "${EF_EXT}" $(seq 0 15) >&2 # | cat -vte >&2
  result="$(test_extColors "Extended Colors 0-15" "$EF_EXT" 0 15 "$(test_firstLine "$expected")")"
  echo "$(test_firstLine "$result")" >&2
  messages="$(test_getLine "$result" 1)"
  echo "$(test_lastLine "$result")"

  for i in $(seq 0 5); do
    # test_printExtColors "$EF_EXT" $(seq $((i * 36 + 16)) $((i * 36 + 51))) # | cat -vte >&2
    result="$(test_extColors "Extended Colors $((i * 36 + 16))-$((i * 36 + 51))" "$EF_EXT" $((i * 36 + 16)) $((i * 36 + 51)) "$(test_getLine "$expected" "$((i + 1))")")"
    echo "$(test_firstLine "$result")" >&2
    messages="${messages}${NL}$(test_getLine "$result" 1)"
    echo "$(test_lastLine "$result")"
  done

  # test_printExtColors "${EF_EXT}" $(seq 232 255) | cat -vte >&2
  result="$(test_extColors "Extended Colors 232-255" "$EF_EXT" 232 255 "$(test_lastLine "$expected")")"

  echo "$(test_firstLine "$result")" >&2
  messages="${messages}${NL}$(test_getLine "$result" 1)"
  echo "$(test_lastLine "$result")"

  echo "${NL}$messages" >&2

  test_title "Extended Color Tests (background)${NL}"

  expected="$(
    cat <<EOF
^[[48;5;0m000^[[49m^[[48;5;1m001^[[49m^[[48;5;2m002^[[49m^[[48;5;3m003^[[49m^[[48;5;4m004^[[49m^[[48;5;5m005^[[49m^[[48;5;6m006^[[49m^[[48;5;7m007^[[49m^[[48;5;8m008^[[49m^[[48;5;9m009^[[49m^[[48;5;10m010^[[49m^[[48;5;11m011^[[49m^[[48;5;12m012^[[49m^[[48;5;13m013^[[49m^[[48;5;14m014^[[49m^[[48;5;15m015^[[49m$
^[[48;5;16m016^[[49m^[[48;5;17m017^[[49m^[[48;5;18m018^[[49m^[[48;5;19m019^[[49m^[[48;5;20m020^[[49m^[[48;5;21m021^[[49m^[[48;5;22m022^[[49m^[[48;5;23m023^[[49m^[[48;5;24m024^[[49m^[[48;5;25m025^[[49m^[[48;5;26m026^[[49m^[[48;5;27m027^[[49m^[[48;5;28m028^[[49m^[[48;5;29m029^[[49m^[[48;5;30m030^[[49m^[[48;5;31m031^[[49m^[[48;5;32m032^[[49m^[[48;5;33m033^[[49m^[[48;5;34m034^[[49m^[[48;5;35m035^[[49m^[[48;5;36m036^[[49m^[[48;5;37m037^[[49m^[[48;5;38m038^[[49m^[[48;5;39m039^[[49m^[[48;5;40m040^[[49m^[[48;5;41m041^[[49m^[[48;5;42m042^[[49m^[[48;5;43m043^[[49m^[[48;5;44m044^[[49m^[[48;5;45m045^[[49m^[[48;5;46m046^[[49m^[[48;5;47m047^[[49m^[[48;5;48m048^[[49m^[[48;5;49m049^[[49m^[[48;5;50m050^[[49m^[[48;5;51m051^[[49m$
^[[48;5;52m052^[[49m^[[48;5;53m053^[[49m^[[48;5;54m054^[[49m^[[48;5;55m055^[[49m^[[48;5;56m056^[[49m^[[48;5;57m057^[[49m^[[48;5;58m058^[[49m^[[48;5;59m059^[[49m^[[48;5;60m060^[[49m^[[48;5;61m061^[[49m^[[48;5;62m062^[[49m^[[48;5;63m063^[[49m^[[48;5;64m064^[[49m^[[48;5;65m065^[[49m^[[48;5;66m066^[[49m^[[48;5;67m067^[[49m^[[48;5;68m068^[[49m^[[48;5;69m069^[[49m^[[48;5;70m070^[[49m^[[48;5;71m071^[[49m^[[48;5;72m072^[[49m^[[48;5;73m073^[[49m^[[48;5;74m074^[[49m^[[48;5;75m075^[[49m^[[48;5;76m076^[[49m^[[48;5;77m077^[[49m^[[48;5;78m078^[[49m^[[48;5;79m079^[[49m^[[48;5;80m080^[[49m^[[48;5;81m081^[[49m^[[48;5;82m082^[[49m^[[48;5;83m083^[[49m^[[48;5;84m084^[[49m^[[48;5;85m085^[[49m^[[48;5;86m086^[[49m^[[48;5;87m087^[[49m$
^[[48;5;88m088^[[49m^[[48;5;89m089^[[49m^[[48;5;90m090^[[49m^[[48;5;91m091^[[49m^[[48;5;92m092^[[49m^[[48;5;93m093^[[49m^[[48;5;94m094^[[49m^[[48;5;95m095^[[49m^[[48;5;96m096^[[49m^[[48;5;97m097^[[49m^[[48;5;98m098^[[49m^[[48;5;99m099^[[49m^[[48;5;100m100^[[49m^[[48;5;101m101^[[49m^[[48;5;102m102^[[49m^[[48;5;103m103^[[49m^[[48;5;104m104^[[49m^[[48;5;105m105^[[49m^[[48;5;106m106^[[49m^[[48;5;107m107^[[49m^[[48;5;108m108^[[49m^[[48;5;109m109^[[49m^[[48;5;110m110^[[49m^[[48;5;111m111^[[49m^[[48;5;112m112^[[49m^[[48;5;113m113^[[49m^[[48;5;114m114^[[49m^[[48;5;115m115^[[49m^[[48;5;116m116^[[49m^[[48;5;117m117^[[49m^[[48;5;118m118^[[49m^[[48;5;119m119^[[49m^[[48;5;120m120^[[49m^[[48;5;121m121^[[49m^[[48;5;122m122^[[49m^[[48;5;123m123^[[49m$
^[[48;5;124m124^[[49m^[[48;5;125m125^[[49m^[[48;5;126m126^[[49m^[[48;5;127m127^[[49m^[[48;5;128m128^[[49m^[[48;5;129m129^[[49m^[[48;5;130m130^[[49m^[[48;5;131m131^[[49m^[[48;5;132m132^[[49m^[[48;5;133m133^[[49m^[[48;5;134m134^[[49m^[[48;5;135m135^[[49m^[[48;5;136m136^[[49m^[[48;5;137m137^[[49m^[[48;5;138m138^[[49m^[[48;5;139m139^[[49m^[[48;5;140m140^[[49m^[[48;5;141m141^[[49m^[[48;5;142m142^[[49m^[[48;5;143m143^[[49m^[[48;5;144m144^[[49m^[[48;5;145m145^[[49m^[[48;5;146m146^[[49m^[[48;5;147m147^[[49m^[[48;5;148m148^[[49m^[[48;5;149m149^[[49m^[[48;5;150m150^[[49m^[[48;5;151m151^[[49m^[[48;5;152m152^[[49m^[[48;5;153m153^[[49m^[[48;5;154m154^[[49m^[[48;5;155m155^[[49m^[[48;5;156m156^[[49m^[[48;5;157m157^[[49m^[[48;5;158m158^[[49m^[[48;5;159m159^[[49m$
^[[48;5;160m160^[[49m^[[48;5;161m161^[[49m^[[48;5;162m162^[[49m^[[48;5;163m163^[[49m^[[48;5;164m164^[[49m^[[48;5;165m165^[[49m^[[48;5;166m166^[[49m^[[48;5;167m167^[[49m^[[48;5;168m168^[[49m^[[48;5;169m169^[[49m^[[48;5;170m170^[[49m^[[48;5;171m171^[[49m^[[48;5;172m172^[[49m^[[48;5;173m173^[[49m^[[48;5;174m174^[[49m^[[48;5;175m175^[[49m^[[48;5;176m176^[[49m^[[48;5;177m177^[[49m^[[48;5;178m178^[[49m^[[48;5;179m179^[[49m^[[48;5;180m180^[[49m^[[48;5;181m181^[[49m^[[48;5;182m182^[[49m^[[48;5;183m183^[[49m^[[48;5;184m184^[[49m^[[48;5;185m185^[[49m^[[48;5;186m186^[[49m^[[48;5;187m187^[[49m^[[48;5;188m188^[[49m^[[48;5;189m189^[[49m^[[48;5;190m190^[[49m^[[48;5;191m191^[[49m^[[48;5;192m192^[[49m^[[48;5;193m193^[[49m^[[48;5;194m194^[[49m^[[48;5;195m195^[[49m$
^[[48;5;196m196^[[49m^[[48;5;197m197^[[49m^[[48;5;198m198^[[49m^[[48;5;199m199^[[49m^[[48;5;200m200^[[49m^[[48;5;201m201^[[49m^[[48;5;202m202^[[49m^[[48;5;203m203^[[49m^[[48;5;204m204^[[49m^[[48;5;205m205^[[49m^[[48;5;206m206^[[49m^[[48;5;207m207^[[49m^[[48;5;208m208^[[49m^[[48;5;209m209^[[49m^[[48;5;210m210^[[49m^[[48;5;211m211^[[49m^[[48;5;212m212^[[49m^[[48;5;213m213^[[49m^[[48;5;214m214^[[49m^[[48;5;215m215^[[49m^[[48;5;216m216^[[49m^[[48;5;217m217^[[49m^[[48;5;218m218^[[49m^[[48;5;219m219^[[49m^[[48;5;220m220^[[49m^[[48;5;221m221^[[49m^[[48;5;222m222^[[49m^[[48;5;223m223^[[49m^[[48;5;224m224^[[49m^[[48;5;225m225^[[49m^[[48;5;226m226^[[49m^[[48;5;227m227^[[49m^[[48;5;228m228^[[49m^[[48;5;229m229^[[49m^[[48;5;230m230^[[49m^[[48;5;231m231^[[49m$
^[[48;5;232m232^[[49m^[[48;5;233m233^[[49m^[[48;5;234m234^[[49m^[[48;5;235m235^[[49m^[[48;5;236m236^[[49m^[[48;5;237m237^[[49m^[[48;5;238m238^[[49m^[[48;5;239m239^[[49m^[[48;5;240m240^[[49m^[[48;5;241m241^[[49m^[[48;5;242m242^[[49m^[[48;5;243m243^[[49m^[[48;5;244m244^[[49m^[[48;5;245m245^[[49m^[[48;5;246m246^[[49m^[[48;5;247m247^[[49m^[[48;5;248m248^[[49m^[[48;5;249m249^[[49m^[[48;5;250m250^[[49m^[[48;5;251m251^[[49m^[[48;5;252m252^[[49m^[[48;5;253m253^[[49m^[[48;5;254m254^[[49m^[[48;5;255m255^[[49m$
EOF
  )"

  # test_printExtColors "${EF_EXT}" $(seq 0 15) # | cat -vte >&2
  result="$(test_extColors "Extended Colors (background) 0-15" "$EB_EXT" 0 15 "$(test_firstLine "$expected")")"

  # echo "'$result'" >&2 # | cat -vte >&2
  echo "$(test_firstLine "$result")" >&2
  messages="$(test_getLine "$result" 1)"
  echo "$(test_lastLine "$result")"
  # echo "$messages" >&2

  for i in $(seq 0 5); do
    # test_printExtColors "$EF_EXT" $(seq $((i * 36 + 16)) $((i * 36 + 51))) # | cat -vte >&2
    result="$(test_extColors "Extended Colors (background) $((i * 36 + 16))-$((i * 36 + 51))" "$EB_EXT" $((i * 36 + 16)) $((i * 36 + 51)) "$(test_getLine "$expected" "$((i + 1))")")"
    echo "$(test_firstLine "$result")" >&2
    messages="${messages}${NL}$(test_getLine "$result" 1)"
    echo "$(test_lastLine "$result")"
  done

  # test_printExtColors "${EF_EXT}" $(seq 232 255) | cat -vte >&2
  result="$(test_extColors "Extended Colors (background) 232-255" "$EB_EXT" 232 255 "$(test_lastLine "$expected")")"

  # echo "'$result'" >&2 # | cat -vte >&2
  echo "$(test_firstLine "$result")" >&2
  messages="${messages}${NL}$(test_getLine "$result" 1)"
  echo "$(test_lastLine "$result")"

  echo "${NL}$messages" >&2
}

test_reportTests "$test_group_list"
